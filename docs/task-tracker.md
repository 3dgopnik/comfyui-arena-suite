# Task Tracker

## Задача: Professional Cursor setup for ComfyUI node dev

* **Статус**: В процессе
* **Описание**: Настройка профессиональной среды разработки с правилами Cursor для эффективной работы с ComfyUI нодами
* **Шаги выполнения**:
  * [x] Создать структуру .cursor/rules/ с профессиональными правилами
  * [x] Создать 00-process.mdc - основные правила процесса и документации
  * [x] Создать 10-comfyui-node.mdc - контракт и стиль для ComfyUI нод
  * [x] Создать 20-tests-tooling.mdc - правила тестирования и инструментов
  * [x] Создать 30-release.mdc - шаблоны для релизных заметок
  * [x] Создать 40-platform-paths.mdc - справочник путей ComfyUI Desktop
  * [x] Обновить документацию согласно новым форматам
  * [x] Настроить базовые конфиги для ruff, mypy, pytest и pre-commit
  * [x] Проверить работоспособность всех инструментов
* **Зависимости**: Cursor IDE, Python 3.11+, ComfyUI Desktop

## Задача: Система управления контекстом ноды

* **Статус**: Завершена
* **Описание**: Создание системы управления концепцией ноды для предотвращения забывчивости и обеспечения консистентности разработки
* **Шаги выполнения**:
  * [x] Создать 50-context.mdc с концепцией ноды Arena AutoCache
  * [x] Описать логику работы ноды: NAS, env файлы, состояния активации
  * [x] Настроить обязательное чтение концепции в новых чатах
* **Зависимости**: Завершение настройки Cursor rules

## Задача: Настройка инструментов качества кода

* **Статус**: Завершена
* **Описание**: Настройка ruff, mypy, pytest и pre-commit hooks для автоматической проверки качества кода
* **Шаги выполнения**:
  * [x] Обновить pyproject.toml с конфигурацией ruff
  * [x] Создать mypy.ini с strict настройками
  * [x] Настроить .pre-commit-config.yaml
  * [x] Создать базовую структуру тестов
  * [x] Проверить работу всех инструментов
* **Зависимости**: Завершение настройки Cursor rules

## Задача: Исправить чтение Max Cache GB из Settings UI ✅ ЗАВЕРШЕНО

* **Статус**: Завершена
* **Описание**: Проблема с чтением значения Max Cache GB из ComfyUI Settings UI - всегда возвращалось 0 вместо реального значения (512)
* **Шаги выполнения**:
  * [x] Создать GitHub Issue #XXX
  * [x] Улучшить DOM селекторы в arena_settings_save_button.js
  * [x] Добавить sanitizeNumber функцию
  * [x] Добавить merge стратегию для .env
  * [x] Добавить чтение из app.ui.settings и localStorage
  * [x] Перейти на официальный ComfyUI API (app.extensionManager.setting.get)
  * [x] Добавить принудительный blur() для PrimeVue InputNumber
  * [x] Протестировать исправление
  * [x] Обновить документацию
* **Зависимости**: ComfyUI Settings UI, PrimeVue InputNumber
* **Решение**: Использование официального ComfyUI Settings API вместо парсинга DOM решает проблему с timing PrimeVue InputNumber

## Задача: Миграция существующего кода

* **Статус**: Не начата
* **Описание**: Приведение существующего кода в соответствие с новыми стандартами качества
* **Шаги выполнения**:
  * [ ] Провести аудит существующего кода
  * [ ] Добавить типизацию во все модули
  * [ ] Написать тесты для существующих нод
  * [ ] Обновить docstrings согласно стандартам
  * [ ] Проверить соответствие ruff и mypy
* **Зависимости**: Завершение настройки инструментов качества
