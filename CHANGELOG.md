c:\ComfyUI\user\default\workflows\Test_lora_multiple.json# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [3.3.5] - 2025-01-27

### Changed
- **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è Arena AutoCache** - v3.3.0 ‚Üí v3.3.5
- **–î–æ–±–∞–≤–ª–µ–Ω —ç–º–æ–¥–∑–∏ üÖ∞Ô∏è** - –¥–ª—è –ª—É—á—à–µ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ ComfyUI
- **–£–ø—Ä–æ—â–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Ç–æ–ª—å–∫–æ 2 –Ω–æ–¥—ã: Arena AutoCache –∏ Arena Make Tiles Segments

## [3.3.0] - 2025-01-27

### Added
- **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è Arena AutoCache v3.3.0-optimized** - —Ç–æ–ª—å–∫–æ OnDemand —Ä–µ–∂–∏–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
  - **OnDemand –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–∞—Ç—á folder_paths + get_full_path –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
  - **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–æ–¥–µ–ª–µ–π** - –ø–∞—Ä–∞–º–µ—Ç—Ä categories –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–æ–≤ –º–æ–¥–µ–ª–µ–π –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
  - **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤** - –ø–∞—Ä–∞–º–µ—Ç—Ä min_size_mb –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–æ—Ä–æ–≥–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
  - **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è ARENA_CACHE_MIN_SIZE_MB** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ GitHub Actions
  - **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Ñ–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫
  - **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Ç–æ–ª—å–∫–æ 2 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞: categories –∏ min_size_mb
  - **–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ—à–µ–Ω–∏—è—Ö –∏–∑ arena_auto_cache_old.py

### Changed
- **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ 59.4%** - —Å 1500 –¥–æ 609 —Å—Ç—Ä–æ–∫
- **–£–¥–∞–ª–µ–Ω–æ 10 –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤** - API –º–µ—Ç–æ–¥—ã, direct –º–µ—Ç–æ–¥—ã, fallback –ª–æ–≥–∏–∫–∞
- **–°–æ–∫—Ä–∞—â–µ–Ω–æ –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ 84%** - —Å 142 –¥–æ 23 —Å–æ–æ–±—â–µ–Ω–∏–π
- **–£–ø—Ä–æ—â–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –Ω–∞ 78%** - —Å 42 –¥–æ 9 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **–£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞** - —É–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –±–ª–æ–∫–∏ –∏ –∏–∑–±—ã—Ç–æ—á–Ω–∞—è –ª–æ–≥–∏–∫–∞

### Removed
- **API –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ workflow** - `_get_workflow_via_api()`, `_get_canvas_workflow_via_api()`
- **Direct –º–µ—Ç–æ–¥—ã** - `_get_workflow_direct()`, `_get_current_workflow()`
- **Alternative –º–µ—Ç–æ–¥—ã** - `_get_workflow_alternative()`, `_analyze_current_canvas()`
- **–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ fallback –º–µ—Ç–æ–¥—ã** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–ª—É—á–µ–Ω–∏—è workflow
- **–î—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥** - –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### Fixed
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —É–±—Ä–∞–Ω—ã –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã, –æ—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞** - —É–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ workflow
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–∞** - –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ª–æ–≥–∏–∫–∞

## [3.2.0] - 2025-01-27

### Added
- **HTTP API –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–∞–Ω–≤–∞—Å–∞** - `_get_canvas_workflow_via_api()`
- **–ê–Ω–∞–ª–∏–∑ workflow –±–µ–∑ Queue** - —Ç–µ–ø–µ—Ä—å –Ω–æ–¥–∞ –º–æ–∂–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å workflow —Å –∫–∞–Ω–≤–∞—Å–∞ —á–µ—Ä–µ–∑ HTTP API
- **Fallback –ª–æ–≥–∏–∫–∞** - –µ—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä—è–º—ã–µ –º–µ—Ç–æ–¥—ã

### Changed
- **–£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è workflow** - —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ—Ç HTTP API, –∑–∞—Ç–µ–º –ø—Ä—è–º—ã–µ –º–µ—Ç–æ–¥—ã
- **–û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è** - –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≥–æ, –æ—Ç–∫—É–¥–∞ –ø–æ–ª—É—á–µ–Ω workflow

### Fixed
- **–†–∞–±–æ—Ç–∞ –±–µ–∑ Queue** - —Ç–µ–ø–µ—Ä—å –Ω–æ–¥–∞ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å workflow –Ω–∞ –∫–∞–Ω–≤–∞—Å–µ –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Queue
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Desktop** - HTTP API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π, —Ç–∞–∫ –∏ –≤ –¥–µ—Å–∫—Ç–æ–ø –≤–µ—Ä—Å–∏–∏ ComfyUI

## [3.1.5] - 2025-01-27

### Fixed
- **ComfyUI-Easy-Use Integration**: Enhanced support for ComfyUI-Easy-Use modules and prompt handling
- **Workflow File Detection**: Added support for user/default/workflows directory
- **Module Attribute Scanning**: Improved scanning of module attributes for workflow data
- **Workflow Data Extraction**: Better extraction from ComfyUI-Easy-Use prompt modules

### Changed
- **Module Processing**: Enhanced `_get_workflow_direct()` to better handle ComfyUI-Easy-Use modules
- **File Search**: Added user/default/workflows directory to workflow file search
- **Attribute Scanning**: Improved scanning of module attributes for workflow data
- **Error Handling**: Better handling of ComfyUI-Easy-Use modules

### Technical Details
- Enhanced ComfyUI-Easy-Use module detection in `_get_workflow_direct()`
- Added user/default/workflows directory to workflow file search patterns
- Improved module attribute scanning for workflow data extraction
- Enhanced error handling for ComfyUI-Easy-Use modules
- Added comprehensive attribute scanning for prompt modules

## [3.1.4] - 2025-01-27

### Fixed
- **Module Processing**: Enhanced module handling to extract workflow data from ComfyUI modules
- **Workflow Detection**: Improved extraction of nodes data from `comfy_execution.graph` module
- **Type Conversion**: Added module-to-dict conversion for better workflow analysis

### Changed
- **Module Handling**: Enhanced `_get_workflow_direct()` to better handle ComfyUI modules
- **Workflow Analysis**: Improved `_analyze_workflow_for_models()` to process module attributes
- **Error Handling**: Better handling of module objects in workflow data

### Technical Details
- Enhanced module processing in `_get_workflow_direct()` method
- Added module-to-dict conversion in `_analyze_workflow_for_models()`
- Improved extraction of nodes data from ComfyUI execution modules
- Added comprehensive attribute scanning for module objects
- Enhanced workflow data extraction from `comfy_execution.graph`

## [3.1.3] - 2025-01-27

### Fixed
- **Type Checking**: Fixed `object of type 'module' has no len()` error with proper isinstance() checks
- **Module Handling**: Improved handling of ComfyUI modules with proper type validation
- **Workflow Detection**: Streamlined to use only direct ComfyUI access (removed API dependency)

### Changed
- **API Approach**: Removed ComfyUI API dependency for better ComfyUI Electron compatibility
- **Error Handling**: Enhanced type checking for workflow data analysis
- **User Experience**: Simplified workflow detection to focus on direct ComfyUI access

### Technical Details
- Removed `_get_workflow_via_api()` method (no longer needed for ComfyUI Electron)
- Enhanced `_analyze_workflow_for_models()` with proper isinstance() checks
- Improved module handling in `_get_workflow_direct()` method
- Added comprehensive type validation for nodes data structures
- Streamlined workflow detection to use only direct ComfyUI access + file fallback

## [3.1.2] - 2025-01-27

### Added
- **Auto Port Detection**: Automatic scanning of common ComfyUI ports (8188, 8189, 8190, 8080, 8081, 3000, 5000)
- **Configurable API Settings**: Added `comfyui_port` and `comfyui_host` parameters to node
- **Flexible Port Detection**: Support for different ComfyUI ports and hosts
- **Environment Variables**: Support for `COMFYUI_PORT` and `COMFYUI_HOST` environment variables
- **Port Detection Documentation**: Added guide for finding ComfyUI port

### Changed
- **API Approach**: Switched from internal module access to ComfyUI API for workflow analysis
- **Reliability**: More reliable workflow detection using ComfyUI's HTTP API endpoints
- **Error Handling**: Better error messages and fallback strategies
- **User Experience**: Clearer feedback when workflow data is not available

### Technical Details
- Added `_get_workflow_direct()` method for direct ComfyUI module access (primary method)
- Added `_get_workflow_alternative()` method for file-based workflow detection (fallback)
- Removed dependency on ComfyUI API for better compatibility with ComfyUI Electron
- Enhanced error messages to guide users on proper usage
- Improved workflow data extraction reliability with proper type checking
- Added direct PromptServer access for ComfyUI Electron
- Fixed module handling errors with proper isinstance() checks
- Streamlined workflow detection to focus on direct ComfyUI access

## [3.1.1] - 2025-01-27

### Fixed
- **Module Handling**: Fixed `object of type 'module' has no len()` error when workflow data is a module
- **Workflow Analysis**: Improved handling of ComfyUI's `comfy_execution.graph` module objects
- **Node Extraction**: Enhanced extraction of nodes from module objects with proper type checking
- **Error Handling**: Better error handling for complex workflow data structures

### Technical Details
- Enhanced `_analyze_workflow_for_models()` to properly handle module objects
- Improved `_get_current_workflow()` to extract data from module attributes
- Added proper type checking for module vs dict/list objects
- Fixed workflow data extraction from ComfyUI's internal modules

## [3.1.0] - 2025-01-27

### Added
- **Workflow Analysis**: Automatic analysis of entire ComfyUI workflow to detect all model nodes
- **First-Run Cache Warming**: Cache warmup only triggers on first node execution per session
- **Comprehensive Model Detection**: Support for 20+ model node types including Checkpoint, VAE, LoRA, ControlNet, IP-Adapter, etc.
- **Async Cache Operations**: Non-blocking model copying with threading for better performance
- **Enhanced Logging**: Detailed progress logging with emoji indicators for better user experience
- **Force Warmup Option**: Ability to force cache warmup even if already completed in session
- **Session State Management**: Tracks completed warmups and analyzed models per session
- **Fallback Analysis**: Canvas analysis fallback when workflow data is unavailable
- **Test Suite**: Comprehensive test coverage for workflow analysis and model detection

### Changed
- **ArenaAutoCache Node**: Enhanced with workflow analysis and first-run logic
- **Model Detection**: Now analyzes entire workflow instead of just current canvas
- **Cache Strategy**: Pre-copies models from NAS to SSD before generation starts
- **Performance**: Asynchronous model copying to prevent blocking main thread
- **User Experience**: Clear progress indicators and detailed logging

### Technical Details
- Added `_analyze_workflow_for_models()` function for comprehensive workflow analysis
- Added `_get_model_category()` function for proper model categorization
- Added `_get_current_workflow()` function for workflow data retrieval
- Enhanced `_cache_models_with_progress()` with async copying and better logging
- Added session state variables `_session_warmup_completed` and `_session_models_analyzed`
- Added `force_warmup` parameter to bypass session state checks

## [3.0.0-alpha] - 2025-09-25

### Added
- Complete repository restart with clean structure
- ArenaAutoCacheSimple node for automatic model caching
- Web extensions for ComfyUI integration
- Comprehensive documentation and CI/CD setup
- Modern Python project structure with pyproject.toml

### Changed
- Migrated from legacy codebase to modern architecture
- Simplified node structure and API
- Updated documentation to reflect new structure

### Removed
- Legacy autocache implementation
- Outdated documentation and scripts
- Moved to clean, maintainable codebase

## [2.17.0] - 2025-09-24

### Fixed
- Fixed `_copy_into_cache_lru()` missing required positional argument 'category'
- Updated ArenaAutoCacheSmart to v2.17
- Improved error handling in cache operations

### Changed
- Enhanced cache management with better parameter handling
- Updated model caching workflow for better reliability

## [2.16.0] - 2025-09-23

### Added
- New ArenaAutoCacheSmart node with advanced caching features
- Support for multiple model types (checkpoints, loras, vaes, clips)
- Automatic cache directory management
- Progress tracking for cache operations

### Changed
- Improved cache performance and reliability
- Better error handling and user feedback
- Enhanced documentation and examples