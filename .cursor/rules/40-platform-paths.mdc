---
type: Always
name: ComfyUI Desktop Paths
description: Справочник путей и артефактов для вашей среды.
---

## Основные пути

### ComfyUI Desktop Installation
- **ComfyUI Desktop**: `c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\`
- **ComfyUI Core**: `c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\`
- **User Data**: `c:\\Users\\acherednikov\\AppData\\Roaming\\ComfyUI\\`

### Development Environment
- **Пользовательская папка**: `c:\\ComfyUI\\`
- **Python Virtual Environment**: `c:\\ComfyUI\\.venv\\`
- **Current Project**: `c:\\ComfyUI\\custom_nodes\\СomfyUI-Arena\\`

### Логи и конфигурация
- **Логи ComfyUI**: `c:\\Users\\acherednikov\\AppData\\Roaming\\ComfyUI\\logs\\`
- **Extra Model Paths**: `c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\extra_model_paths.yaml`
- **ComfyUI Config**: `c:\\Users\\acherednikov\\AppData\\Roaming\\ComfyUI\\config.yaml`

### Web Extensions
- **Основной путь**: `c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\web\\extensions\\`
- **Arena Extension**: `c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\web\\extensions\\arena\\`
- **Development JS**: `c:\\ComfyUI\\custom_nodes\\ComfyUI-Arena\\web\\extensions\\`

### JavaScript Files Logic
- **ЕДИНСТВЕННОЕ МЕСТО**: JavaScript файлы должны быть ТОЛЬКО в `web/extensions/arena/`
- **НЕ ДОЛЖНО БЫТЬ**: файлов в `web/arena/`, `web/js/`, `web_custom_versions/` - это вызывает конфликты
- **Синхронизация**: файлы копируются из dev в production через `sync_web_extension.ps1`
- **Загрузка**: ComfyUI загружает JS файлы из `web/extensions/arena/` через `WEB_DIRECTORY = "web"`

### Custom Nodes
- **Custom Nodes Directory**: `c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\custom_nodes\\`
- **Arena Node**: `c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\custom_nodes\\СomfyUI-Arena\\`

## GitHub и репозитории
- **GitHub Repository**: https://github.com/3dgopnik/comfyui-arena-suite
- **Local Git**: `c:\\ComfyUI\\custom_nodes\\СomfyUI-Arena\\.git\\`

## Модели и кэш
- **Models Directory**: `c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\models\\`
- **Arena Cache**: `c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\arena_cache\\`
- **Temp Files**: `c:\\Users\\acherednikov\\AppData\\Local\\Temp\\comfyui_arena\\`

## Python Environment
- **Python Executable**: `c:\\ComfyUI\\.venv\\Scripts\\python.exe`
- **Pip Cache**: `c:\\Users\\acherednikov\\AppData\\Local\\pip\\cache\\`
- **Virtual Environment**: `c:\\ComfyUI\\.venv\\Lib\\site-packages\\`

## Полезные команды

### Проверка путей
```powershell
# Проверка существования ComfyUI
Test-Path "c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\"

# Проверка custom nodes
Get-ChildItem "c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\custom_nodes\\"

# Проверка логов
Get-ChildItem "c:\\Users\\acherednikov\\AppData\\Roaming\\ComfyUI\\logs\\" | Sort-Object LastWriteTime -Descending | Select-Object -First 5
```

### Синхронизация разработки
```powershell
# Копирование файлов из dev в production
Copy-Item "c:\\ComfyUI\\custom_nodes\\СomfyUI-Arena\\*" -Destination "c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\custom_nodes\\СomfyUI-Arena\\" -Recurse -Force

# Синхронизация JavaScript файлов (используйте скрипт)
powershell -ExecutionPolicy Bypass -File custom_nodes/ComfyUI-Arena/scripts/sync_web_extension.ps1
```

### JavaScript Files Management
```powershell
# Проверка JavaScript файлов
Get-ChildItem "c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\web\\extensions\\" -Recurse -Name "*arena*"

# Очистка дубликатов (если есть)
Remove-Item "c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\web\\extensions\\arena_autocache.js" -Force -ErrorAction SilentlyContinue
Remove-Item "c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\web\\extensions\\arena_workflow_analyzer.js" -Force -ErrorAction SilentlyContinue

# Проверка правильного места
Get-ChildItem "c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\web\\extensions\\arena\\"
```

## Переменные окружения
```powershell
# ComfyUI paths
$env:COMFYUI_ROOT = "c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\"
$env:ARENA_DEV_ROOT = "c:\\ComfyUI\\custom_nodes\\СomfyUI-Arena\\"
$env:ARENA_CACHE_DIR = "c:\\Users\\acherednikov\\AppData\\Local\\Programs\\@comfyorgcomfyui-electron\\resources\\ComfyUI\\arena_cache\\"
```

## JavaScript Files Logic

### Правильная структура:
```
Development:
c:\ComfyUI\custom_nodes\ComfyUI-Arena\web\extensions\
├── arena_autocache.js
└── arena_workflow_analyzer.js

Production:
c:\Users\acherednikov\AppData\Local\Programs\@comfyorgcomfyui-electron\resources\ComfyUI\web\extensions\arena\
├── arena_autocache.js
└── arena_workflow_analyzer.js
```

### Критические правила:
1. **ЕДИНСТВЕННОЕ МЕСТО**: JS файлы только в `web/extensions/arena/`
2. **НЕТ ДУБЛИКАТОВ**: не должно быть файлов в корне `web/extensions/`
3. **СИНХРОНИЗАЦИЯ**: используйте `sync_web_extension.ps1`
4. **WEB_DIRECTORY**: в `__init__.py` должно быть `WEB_DIRECTORY = "web"`

### Отладка путей
```python
# Python скрипт для проверки путей
import os
import sys

paths_to_check = [
    r"c:\Users\acherednikov\AppData\Local\Programs\@comfyorgcomfyui-electron\resources\ComfyUI\",
    r"c:\ComfyUI\custom_nodes\ComfyUI-Arena\",
    r"c:\Users\acherednikov\AppData\Roaming\ComfyUI\logs\",
]

for path in paths_to_check:
    exists = os.path.exists(path)
    print(f"{path}: {'✓' if exists else '✗'}")
    if exists:
        print(f"  Files: {len(os.listdir(path))}")
```