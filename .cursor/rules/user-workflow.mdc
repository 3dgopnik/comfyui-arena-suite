---
alwaysApply: true
---
# User Workflow Rules

Правила, которые обновляются в процессе работы для максимального удобства.

## Текущие настройки пользователя
- **OS:** Windows 10
- **ComfyUI Path:** `C:\ComfyUI\`
- **Logs Path:** `C:\Users\acherednikov\AppData\Roaming\ComfyUI\logs\`
- **Working Directory:** `C:\ComfyUI\custom_nodes\comfyui-arena-suite`

## Предпочтения в работе
- **Язык:** Русский для общения, английский для кода
- **Документация:** Подробная с техническими деталями
- **Эксперименты:** Все записывать в EXPERIMENTS.md
- **Отладка:** Сначала логи, потом эксперименты

## Часто используемые команды
- `read_lints` - проверка синтаксиса
- `read_file` - чтение файлов
- `search_replace` - редактирование кода
- `run_terminal_cmd` - выполнение команд

## Паттерны работы
- **Агент сам создает Issue** для каждой новой задачи
- **Агент сам создает PR** для всех изменений
- При проблемах с узлами → проверить логи → записать в EXPERIMENTS.md → экспериментировать
- При изменениях кода → проверить синтаксис → обновить EXPERIMENTS.md
- При создании новых узлов → добавить версию + обратную совместимость

## Важные технические ограничения
- **ComfyUI Desktop:** Активный canvas workflow НЕ доступен через API
- **Canvas живет только в памяти фронтенда** (LiteGraph) до Queue/Save
- **Очередь и history** знают только о выполненных workflow
- **Для получения активного canvas** нужны специальные решения (JS-доступ или расширения)

## Единственный рабочий путь для кеширования
- **Запуск workflow → кеширование в процессе → следующий запуск из кеша**
- ArenaAutoCacheSmart должен работать с **выполняющимися** workflow, а не с canvas
- Кеширование происходит во время выполнения, модели копируются в SSD-кеш
- При повторном запуске того же workflow модели уже берутся из кеша

## Обновления правил
- Эти правила обновляются автоматически в процессе работы
- Добавляются новые паттерны и предпочтения
- Удаляются устаревшие правила