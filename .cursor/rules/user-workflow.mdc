---
alwaysApply: true
---
# User Workflow Rules

Правила, которые обновляются в процессе работы для максимального удобства.

Текущие настройки пользователя

OS: Windows 10

ComfyUI Path: C:\ComfyUI\

Logs Path: C:\Users\acherednikov\AppData\Roaming\ComfyUI\logs\

Working Directory: C:\ComfyUI\custom_nodes\comfyui-arena-suite

Приоритетные правила

После постановки задачи в чате агент обязан предложить создать Issue.

Issue должен содержать: вводные данные из запроса и фрагмент лога (если лог предоставлен пользователем или доступен из путей в Project Rules).

Перед созданием Issue агент показывает пример описания в чате и ждёт подтверждения пользователя.

После подтверждения Issue создаётся и используется для всей дальнейшей работы.

Все комментарии и прогресс фиксируются в этом Issue.

При завершении задачи агент предлагает создать PR, показывает описание в чате и ждёт подтверждения.

После подтверждения PR создаётся и связывается с соответствующим Issue.

Предпочтения в работе

Язык: Русский для общения, английский для кода

Документация: Подробная с техническими деталями

Эксперименты и исследования: Фиксируются через GitHub Issues с меткой research

Отладка: Сначала проверять логи (из указанных путей или вручную), затем экспериментировать

Часто используемые команды

read_lints — проверка синтаксиса

read_file — чтение файлов

search_replace — редактирование кода

run_terminal_cmd — выполнение команд

Паттерны работы

При проблемах с узлами → проверить логи → приложить фрагмент в Issue → экспериментировать

При изменениях кода → проверить синтаксис → обновить связанный Issue

При создании новых узлов → добавить версию + обратную совместимость

Важные технические ограничения

ComfyUI Desktop: Активный canvas workflow не доступен через API

Canvas живёт только в памяти фронтенда (LiteGraph) до Queue/Save

Очередь и history знают только о выполненных workflow

Для получения активного canvas нужны специальные решения (JS-доступ или расширения)

Единственный рабочий путь для кеширования

Запуск workflow → кеширование в процессе → следующий запуск из кеша

ArenaAutoCacheSmart работает с выполняющимися workflow, а не с canvas

Кеширование происходит во время выполнения, модели копируются в SSD-кеш

При повторном запуске того же workflow модели уже берутся из кеша

Обновления правил

Эти правила обновляются автоматически в процессе работы

Добавляются новые паттерны и предпочтения

Устаревшие правила заменяются или уточняются

