# User Workflow Rules

## Общение
- Все задачи формулировать простыми словами на русском языке
- Код и комментарии в коде писать на английском
- Документация вести на русском (основная) и при необходимости на английском

## Правила и документация
- Все новые правила и изменения записывать в user-workflow.mdc
- НЕ удалять правила из папки и репозитория
- Обновлять правила при изменении рабочего процесса
- Сохранять историю изменений правил в git

## Рабочий процесс
- Одна задача = один чат = один Issue в GitHub
- После постановки задачи она сразу копируется в Issue
- Вся работа ведется через Issue: все шаги, комментарии, логи и прогресс фиксируются в комментариях Issue
- Новая цель → новый чат и новый Issue
- Коммиты должны быть маленькими и атомарными
- Работа до финала ведется в Issue → PR → мердж → закрытие Issue

## Pull Requests
- Все изменения проходят через Pull Request
- PR должен быть привязан к соответствующему Issue (Closes #номер)
- В PR обязательно указывать: Summary, Changes, Docs, Changelog, Test Plan
- Без зелёного CI PR не мержится

## Документация
- Все изменения фиксировать в CHANGELOG.md (формат Keep a Changelog + SemVer)
- ROADMAP.md — стратегические задачи
- docs/ru/ — основная документация на русском
- docs/examples/ — примеры
- docs/migration.md — при breaking changes
- Документация обновляется вместе с кодом в том же PR

## Логи и отладка
- При решении проблем в Issue всегда прикладывать фрагмент лога ошибки
- В комментариях фиксировать: текст ошибки, дату/шаг возникновения, результат после исправления

## Code Quality
- Проверять синтаксис после изменений
- Комментировать сложные изменения
- Все результаты экспериментов отражать в связанных Issues
- Писать номер версии в названии нод (например: "Arena Auto Cache v2.1")

## Тестирование функций
- Давать конкретные пошаговые инструкции для тестирования
- Указывать точные действия: "перезапусти ComfyUI", "выбери ноду X", "измени параметр Y на Z"
- Предлагать последовательность тестов: "сначала проверь A, потом B, затем C"
- Давать четкие команды: "запусти workflow", "проверь результат", "сравни с ожидаемым"

## ComfyUI Desktop Paths
### Основные пути
- **ComfyUI Desktop**: `c:\Users\acherednikov\AppData\Local\Programs\@comfyorgcomfyui-electron\`
- **Пользовательская папка**: `c:\ComfyUI\` (модели, ноды и т.д.)
- **Python Virtual Environment**: `c:\ComfyUI\.venv\`
- **Логи**: `c:\Users\acherednikov\AppData\Roaming\ComfyUI\logs\`
- **Extra Model Paths**: `c:\Users\acherednikov\AppData\Local\Programs\@comfyorgcomfyui-electron\resources\ComfyUI\extra_model_paths.yaml`

### Web Extensions
- **Основной путь**: `c:\Users\acherednikov\AppData\Local\Programs\@comfyorgcomfyui-electron\resources\ComfyUI\web\extensions\`
- **Альтернативный путь**: `c:\Users\acherednikov\AppData\Local\Programs\@comfyorgcomfyui-electron\resources\ComfyUI\web_custom_versions\desktop_app\extensions\`